import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { useGame } from '../context/GameContext';
import AvatarCreator from '../components/AvatarCreator';
import HowToPlayModal from '../components/HowToPlayModal';
import { v4 as uuidv4 } from 'uuid';
import { PencilRuler, HelpCircle } from 'lucide-react';

const HomePage: React.FC = () => {
  const navigate = useNavigate();
  const { setPlayer, joinRoom } = useGame();
  const [name, setName] = useState('');
  const [roomCode, setRoomCode] = useState('');
  const [avatar, setAvatar] = useState({
    eyes: 'normal',
    mouth: 'smile',
    color: '#FF6B6B',
    accessory: 'none',
    eyebrows: 'normal'
  });
  const [nameError, setNameError] = useState('');
  const [roomError, setRoomError] = useState('');
  const [showHowToPlay, setShowHowToPlay] = useState(false);

  useEffect(() => {
    const savedName = localStorage.getItem('playerName');
    if (savedName) {
      setName(savedName);
    }

    // Show how to play modal on first visit
    const hasSeenTutorial = localStorage.getItem('hasSeenTutorial');
    if (!hasSeenTutorial) {
      setShowHowToPlay(true);
    }
  }, []);

  const handleCreateRoom = () => {
    if (!validateName()) return;
    
    const playerId = uuidv4();
    setPlayer({
      id: playerId,
      name,
      avatar,
      score: 0,
      isDrawing: false
    });
    
    localStorage.setItem('playerName', name);
    navigate('/create-room');
  };

  const handleJoinRoom = () => {
    if (!validateName()) return;
    
    if (!roomCode.trim()) {
      setRoomError('Please enter a room code');
      return;
    }
    
    const playerId = uuidv4();
    setPlayer({
      id: playerId,
      name,
      avatar,
      score: 0,
      isDrawing: false
    });
    
    localStorage.setItem('playerName', name);
    joinRoom(roomCode);
    navigate(`/room/${roomCode}`);
  };

  const validateName = () => {
    if (!name.trim()) {
      setNameError('Please enter your name');
      return false;
    }
    if (name.length > 12) {
      setNameError('Name must be 12 characters or less');
      return false;
    }
    setNameError('');
    return true;
  };

  const handleNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setName(e.target.value);
    if (nameError) setNameError('');
  };

  const handleRoomCodeChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setRoomCode(e.target.value);
    if (roomError) setRoomError('');
  };

  const handleCloseHowToPlay = () => {
    setShowHowToPlay(false);
    localStorage.setItem('hasSeenTutorial', 'true');
  };

  return (
    <div className="min-h-screen flex flex-col items-center justify-center p-4 relative">
      {/* Bolt.new Hackathon Badge - Top Left */}
      <a
        href="https://bolt.new/"
        target="_blank"
        rel="noopener noreferrer"
        className="absolute top-4 left-4 z-10 w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 transition-transform duration-300 hover:scale-110"
        title="Built with Bolt.new"
      >
        <svg
          viewBox="0.00 0.00 360.00 360.00"
          className="w-full h-full"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g strokeWidth="2.00" fill="none" strokeLinecap="butt">
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 157.16 30.43 Q 156.89 30.47 156.31 29.70 Q 152.60 24.79 148.38 19.28 A 0.44 0.43 65.9 0 0 147.97 19.12 L 142.57 19.93 A 0.10 0.10 0.0 0 0 142.51 20.10 L 155.01 35.78 A 2.13 2.05 22.5 0 1 155.45 36.79 L 156.87 46.25 A 0.68 0.68 0.0 0 0 157.53 46.82 Q 157.54 46.82 159.54 46.53 Q 161.54 46.23 161.55 46.23 A 0.68 0.68 0.0 0 0 162.01 45.49 L 160.64 36.02 A 2.13 2.05 -39.3 0 1 160.77 34.93 L 168.21 16.31 A 0.10 0.10 0.0 0 0 168.11 16.16 L 162.70 16.95 A 0.44 0.43 -82.7 0 0 162.36 17.22 Q 159.91 23.71 157.77 29.49 Q 157.44 30.39 157.16 30.43"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 202.43 31.09 Q 207.37 29.40 207.14 24.87 Q 206.83 18.65 200.08 17.54 Q 193.87 16.52 188.29 16.12 A 0.59 0.59 0.0 0 0 187.66 16.64 L 184.49 44.18 A 0.35 0.34 -82.3 0 0 184.78 44.57 Q 192.49 45.71 198.47 46.03 C 206.58 46.48 210.28 35.75 202.38 31.78 A 0.38 0.38 0.0 0 1 202.43 31.09"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 230.3346 23.4633 A 14.98 13.43 -72.5 0 0 213.0216 33.7115 A 14.98 13.43 -72.5 0 0 221.3254 52.0367 A 14.98 13.43 -72.5 0 0 238.6384 41.7885 A 14.98 13.43 -72.5 0 0 230.3346 23.4633"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 134.79 36.33 Q 138.50 32.66 136.32 28.68 Q 133.33 23.21 126.77 25.15 Q 120.73 26.94 115.53 29.01 A 0.60 0.59 69.5 0 0 115.19 29.76 L 124.34 55.95 A 0.35 0.34 71.8 0 0 124.77 56.17 Q 132.21 53.84 137.74 51.52 C 145.24 48.38 143.89 37.11 135.05 36.98 A 0.38 0.38 0.0 0 1 134.79 36.33"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 250.61 31.88 A 0.51 0.51 0.0 0 0 249.92 32.09 L 236.67 56.56 A 0.51 0.51 0.0 0 0 236.88 57.25 L 251.75 65.30 A 0.51 0.51 0.0 0 0 252.44 65.09 L 254.04 62.14 A 0.51 0.51 0.0 0 0 253.83 61.45 L 243.55 55.88 A 0.51 0.51 0.0 0 1 243.34 55.19 L 254.51 34.58 A 0.51 0.51 0.0 0 0 254.30 33.89 L 250.61 31.88"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 77.09 52.73 L 92.67 75.41 A 0.66 0.66 0.0 0 0 93.59 75.58 L 101.88 69.88 A 13.38 13.04 55.5 0 0 105.05 51.47 L 103.87 49.75 A 13.38 13.04 55.5 0 0 85.55 46.11 L 77.26 51.81 A 0.66 0.66 0.0 0 0 77.09 52.73"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 262.72 73.28 Q 264.26 74.50 264.27 74.51 A 0.65 0.64 36.2 0 0 265.14 74.38 L 279.59 56.16 A 0.55 0.54 37.8 0 1 280.35 56.07 L 286.52 60.97 A 0.50 0.49 37.9 0 0 287.21 60.89 L 289.31 58.24 A 0.55 0.54 -52.4 0 0 289.21 57.47 Q 285.06 54.29 280.60 50.68 Q 276.07 47.18 272.02 43.86 A 0.55 0.54 -50.9 0 0 271.25 43.95 L 269.15 46.60 A 0.50 0.49 38.8 0 0 269.23 47.29 L 275.42 52.17 A 0.55 0.54 38.9 0 1 275.50 52.93 L 261.09 71.18 A 0.65 0.64 40.6 0 0 261.17 72.06 Q 261.18 72.06 262.72 73.28"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 66.44 82.37 Q 75.23 91.05 76.38 92.16 A 0.40 0.39 -45.4 0 0 76.94 92.15 L 89.58 79.52 A 0.51 0.51 0.0 0 0 89.58 78.80 L 87.16 76.38 A 0.47 0.46 -44.6 0 0 86.51 76.38 L 77.58 85.31 A 0.53 0.52 44.6 0 1 76.83 85.31 L 72.08 80.57 A 0.54 0.54 0.0 0 1 72.08 79.81 L 79.93 71.81 A 0.70 0.70 0.0 0 0 80.03 70.95 Q 79.82 70.60 78.93 69.72 Q 78.04 68.84 77.69 68.64 A 0.70 0.70 0.0 0 0 76.83 68.75 L 68.93 76.69 A 0.54 0.54 0.0 0 1 68.17 76.70 L 63.37 72.01 A 0.53 0.52 44.7 0 1 63.36 71.26 L 72.18 62.22 A 0.47 0.46 -46.2 0 0 72.17 61.57 L 69.72 59.18 A 0.51 0.51 0.0 0 0 69.00 59.19 L 56.53 71.99 A 0.40 0.39 -45.3 0 0 56.52 72.55 Q 57.65 73.69 66.44 82.37"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 299.31 92.03 Q 296.12 100.52 294.09 106.62 A 1.30 1.29 -53.5 0 0 294.26 107.77 L 296.14 110.40 A 0.68 0.67 -35.2 0 0 297.09 110.56 L 319.69 94.46 A 0.41 0.41 0.0 0 0 319.79 93.88 L 317.29 90.36 A 0.47 0.47 0.0 0 0 316.64 90.25 L 301.37 101.12 A 0.23 0.23 0.0 0 1 301.01 100.87 Q 301.38 99.55 303.53 93.81 Q 306.73 85.33 308.76 79.23 A 1.30 1.29 -53.5 0 0 308.59 78.08 L 306.71 75.45 A 0.68 0.67 -35.2 0 0 305.76 75.29 L 283.16 91.39 A 0.41 0.41 0.0 0 0 283.06 91.97 L 285.56 95.49 A 0.47 0.47 0.0 0 0 286.21 95.60 L 301.48 84.73 A 0.23 0.23 0.0 0 1 301.85 84.98 Q 301.48 86.30 299.31 92.03"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 281.51 83.63 A 3.07 3.07 0.0 0 0 278.44 80.56 A 3.07 3.07 0.0 0 0 275.37 83.63 A 3.07 3.07 0.0 0 0 278.44 86.70 A 3.07 3.07 0.0 0 0 281.51 83.63"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 64.50 109.82 A 0.25 0.25 0.0 0 0 64.44 109.48 L 56.41 104.03 A 0.67 0.66 34.5 0 1 56.23 103.11 L 58.52 99.74 A 1.07 1.06 20.1 0 1 59.52 99.28 L 70.47 100.55 A 0.46 0.45 -68.8 0 0 70.91 100.35 L 73.93 95.90 A 0.07 0.06 -69.2 0 0 73.89 95.80 L 61.69 94.38 A 0.51 0.50 -85.8 0 1 61.24 93.85 Q 61.50 88.81 58.24 86.28 Q 52.61 81.91 47.28 85.24 Q 45.39 86.42 42.45 90.94 Q 40.98 93.19 38.15 97.13 A 0.65 0.65 0.0 0 0 38.32 98.04 L 61.46 113.77 A 0.30 0.30 0.0 0 0 61.87 113.69 L 64.50 109.82"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 178.82 145.25 L 189.90 94.83 A 0.38 0.38 0.0 0 0 189.53 94.37 L 150.65 94.37 A 0.77 0.77 0.0 0 0 149.90 94.98 L 112.47 265.35 A 0.22 0.22 0.0 0 0 112.79 265.60 L 157.03 242.13 A 1.14 1.14 0.0 0 0 157.60 241.37 L 159.75 231.60 A 0.39 0.39 0.0 0 1 160.45 231.45 C 165.92 239.02 176.27 243.45 185.26 244.30 C 220.79 247.65 242.73 218.35 246.70 186.27 C 250.13 158.60 238.83 132.23 206.93 132.39 C 195.65 132.44 186.68 137.35 179.25 145.47 A 0.25 0.25 0.0 0 1 178.82 145.25"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 311.66 108.55 Q 300.43 113.72 298.98 114.41 A 0.40 0.39 65.2 0 0 298.80 114.93 L 306.16 131.23 A 0.51 0.51 0.0 0 0 306.83 131.48 L 309.95 130.07 A 0.47 0.46 66.1 0 0 310.18 129.46 L 304.97 117.95 A 0.53 0.52 -24.7 0 1 305.24 117.25 L 311.35 114.47 A 0.55 0.55 0.0 0 1 312.06 114.74 L 316.78 124.91 A 0.70 0.70 0.0 0 0 317.55 125.31 Q 317.95 125.24 319.09 124.72 Q 320.23 124.19 320.54 123.93 A 0.70 0.70 0.0 0 0 320.74 123.09 L 316.09 112.89 A 0.55 0.55 0.0 0 1 316.35 112.17 L 322.44 109.34 A 0.53 0.52 -24.7 0 1 323.15 109.59 L 328.49 121.04 A 0.47 0.46 64.5 0 0 329.11 121.26 L 332.21 119.81 A 0.51 0.51 0.0 0 0 332.45 119.14 L 324.88 102.94 A 0.40 0.39 65.4 0 0 324.36 102.74 Q 322.89 103.39 311.66 108.55"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 39.14 129.16 Q 50.46 134.09 51.94 134.71 A 0.40 0.39 -66.5 0 0 52.45 134.50 L 59.69 118.17 A 0.51 0.51 0.0 0 0 59.44 117.50 L 56.31 116.12 A 0.47 0.46 -65.7 0 0 55.70 116.35 L 50.59 127.89 A 0.53 0.52 23.5 0 1 49.89 128.16 L 43.75 125.45 A 0.54 0.54 0.0 0 1 43.48 124.74 L 47.92 114.46 A 0.70 0.69 30.5 0 0 47.70 113.62 Q 47.39 113.37 46.24 112.87 Q 45.09 112.37 44.69 112.31 A 0.70 0.69 16.6 0 0 43.93 112.72 L 39.42 122.97 A 0.54 0.54 0.0 0 1 38.71 123.25 L 32.55 120.61 A 0.53 0.52 23.6 0 1 32.27 119.91 L 37.24 108.31 A 0.47 0.46 -67.3 0 0 37.00 107.71 L 33.86 106.36 A 0.51 0.51 0.0 0 0 33.19 106.63 L 26.16 123.04 A 0.40 0.39 -66.4 0 0 26.36 123.57 Q 27.82 124.23 39.14 129.16"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 340.29 146.05 Q 339.89 144.10 339.86 143.99 A 0.66 0.65 83.5 0 0 339.27 143.51 L 318.35 142.42 A 0.20 0.20 0.0 0 1 318.27 142.04 L 337.28 132.82 A 0.18 0.18 0.0 0 0 337.38 132.62 L 336.60 127.58 A 0.26 0.26 0.0 0 0 336.22 127.39 L 310.39 140.78 A 0.68 0.67 -19.2 0 0 310.05 141.48 L 310.68 145.55 A 0.66 0.65 -2.1 0 0 311.27 146.10 Q 321.68 146.94 331.29 147.63 Q 331.53 147.65 331.58 147.87 Q 331.62 148.05 331.40 148.16 Q 322.85 152.59 313.62 157.48 A 0.66 0.65 -21.2 0 0 313.29 158.22 L 314.32 162.21 A 0.68 0.67 -4.1 0 0 314.92 162.71 L 343.93 164.80 A 0.26 0.26 0.0 0 0 344.20 164.47 L 342.93 159.53 A 0.18 0.18 0.0 0 0 342.76 159.39 L 321.65 158.44 A 0.20 0.20 0.0 0 1 321.57 158.06 L 340.35 148.78 A 0.66 0.65 73.2 0 0 340.71 148.11 Q 340.69 147.99 340.29 146.05"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 19.08 149.12 Q 18.70 151.07 18.68 151.19 A 0.66 0.65 -73.7 0 0 19.04 151.86 L 37.92 160.95 A 0.20 0.20 0.0 0 1 37.84 161.34 L 16.74 162.49 A 0.18 0.18 0.0 0 0 16.57 162.64 L 15.34 167.59 A 0.26 0.26 0.0 0 0 15.62 167.92 L 44.63 165.55 A 0.68 0.67 3.6 0 0 45.22 165.03 L 46.21 161.03 A 0.66 0.65 20.6 0 0 45.87 160.30 Q 36.59 155.49 27.99 151.14 Q 27.78 151.03 27.82 150.81 Q 27.85 150.63 28.10 150.61 Q 37.70 149.83 48.11 148.89 A 0.66 0.65 1.6 0 0 48.70 148.34 L 49.29 144.26 A 0.68 0.67 18.6 0 0 48.94 143.56 L 22.97 130.41 A 0.26 0.26 0.0 0 0 22.59 130.61 L 21.86 135.66 A 0.18 0.18 0.0 0 0 21.96 135.86 L 41.07 144.89 A 0.20 0.20 0.0 0 1 40.99 145.28 L 20.08 146.57 A 0.66 0.65 -84.1 0 0 19.49 147.06 Q 19.46 147.17 19.08 149.12"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 45.7836 187.3610 A 14.99 13.45 -3.4 0 0 30.0223 174.8237 A 14.99 13.45 -3.4 0 0 15.8564 189.1390 A 14.99 13.45 -3.4 0 0 31.6177 201.6763 A 14.99 13.45 -3.4 0 0 45.7836 187.3610"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 314.21 195.79 Q 314.13 196.41 314.08 197.07 A 1.00 0.99 16.7 0 0 314.60 198.02 L 332.11 207.50 A 0.27 0.27 0.0 0 1 331.95 208.01 L 313.34 205.85 A 0.42 0.42 0.0 0 0 312.87 206.23 L 312.38 210.36 A 0.43 0.43 0.0 0 0 312.76 210.83 L 340.39 214.04 A 0.58 0.58 0.0 0 0 341.04 213.53 L 341.64 208.34 A 0.87 0.86 17.7 0 0 341.19 207.48 L 322.43 197.13 A 0.10 0.08 81.6 0 1 322.40 197.10 Q 322.24 196.92 322.26 196.72 Q 322.29 196.53 322.48 196.39 A 0.10 0.08 -68.4 0 1 322.52 196.37 L 343.15 190.59 A 0.87 0.86 -4.5 0 0 343.79 189.86 L 344.39 184.67 A 0.58 0.58 0.0 0 0 343.88 184.02 L 316.25 180.81 A 0.43 0.43 0.0 0 0 315.77 181.18 L 315.30 185.32 A 0.42 0.42 0.0 0 0 315.67 185.79 L 334.28 187.96 A 0.27 0.27 0.0 0 1 334.32 188.49 L 315.10 193.71 A 1.00 0.99 -3.4 0 0 314.38 194.51 Q 314.28 195.16 314.21 195.79"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 50.18 217.58 A 0.51 0.50 -14.0 0 0 49.56 217.21 L 41.16 219.28 A 0.60 0.59 77.2 0 1 40.44 218.82 C 39.74 215.65 39.01 211.45 37.02 209.15 C 34.50 206.23 30.73 205.41 27.13 206.56 C 16.32 209.99 21.51 220.61 23.13 228.40 A 0.63 0.63 0.0 0 0 23.90 228.88 L 50.93 222.22 A 0.39 0.38 76.5 0 0 51.21 221.75 L 50.18 217.58"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 314.18 226.95 Q 312.82 230.76 312.61 231.34 A 0.96 0.95 -80.1 0 1 311.71 231.97 L 305.36 231.97 A 0.75 0.74 -79.9 0 0 304.66 232.46 L 303.18 236.56 A 0.49 0.49 0.0 0 0 303.64 237.22 L 332.83 237.22 A 0.88 0.88 0.0 0 0 333.63 236.70 Q 334.11 235.66 334.61 234.25 Q 335.11 232.85 335.41 231.74 A 0.88 0.88 0.0 0 0 335.12 230.83 L 312.54 212.32 A 0.49 0.49 0.0 0 0 311.77 212.54 L 310.32 216.65 A 0.75 0.74 -60.8 0 0 310.55 217.47 L 315.46 221.50 A 0.96 0.95 -60.6 0 1 315.75 222.55 Q 315.54 223.14 314.18 226.95"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 39.42 264.15 Q 40.43 265.86 40.50 265.95 A 0.66 0.65 64.4 0 0 41.22 266.21 L 61.35 260.39 A 0.20 0.20 0.0 0 1 61.55 260.73 L 46.60 275.67 A 0.18 0.18 0.0 0 0 46.57 275.89 L 48.96 280.40 A 0.26 0.26 0.0 0 0 49.38 280.46 L 69.41 259.34 A 0.68 0.67 -38.3 0 0 69.51 258.56 L 67.58 254.92 A 0.66 0.65 -21.2 0 0 66.84 254.60 Q 56.72 257.21 47.41 259.71 Q 47.18 259.77 47.08 259.61 Q 46.97 259.42 47.13 259.24 Q 53.77 252.25 60.89 244.60 A 0.66 0.65 -40.3 0 0 60.96 243.80 L 58.68 240.37 A 0.68 0.67 -23.2 0 0 57.95 240.08 L 29.83 247.61 A 0.26 0.26 0.0 0 0 29.69 248.01 L 32.51 252.26 A 0.18 0.18 0.0 0 0 32.72 252.34 L 52.98 246.33 A 0.20 0.20 0.0 0 1 53.18 246.67 L 38.47 261.58 A 0.66 0.65 54.1 0 0 38.35 262.34 Q 38.40 262.44 39.42 264.15"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 325.66 254.76 L 302.11 240.33 A 0.62 0.62 0.0 0 0 301.25 240.53 L 296.07 248.99 A 13.28 13.24 31.5 0 0 300.48 267.22 L 302.44 268.42 A 13.28 13.24 31.5 0 0 320.68 264.07 L 325.86 255.61 A 0.62 0.62 0.0 0 0 325.66 254.76"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 297.07 273.37 Q 287.94 265.05 286.74 263.99 A 0.40 0.39 -47.7 0 0 286.18 264.02 L 274.06 277.15 A 0.51 0.51 0.0 0 0 274.09 277.87 L 276.60 280.19 A 0.47 0.46 -46.9 0 0 277.25 280.17 L 285.82 270.88 A 0.53 0.52 42.3 0 1 286.57 270.85 L 291.51 275.40 A 0.54 0.54 0.0 0 1 291.54 276.16 L 284.01 284.47 A 0.70 0.70 0.0 0 0 283.95 285.33 Q 284.17 285.67 285.10 286.52 Q 286.02 287.36 286.38 287.55 A 0.70 0.70 0.0 0 0 287.24 287.41 L 294.81 279.15 A 0.54 0.54 0.0 0 1 295.57 279.11 L 300.56 283.60 A 0.53 0.52 42.4 0 1 300.60 284.35 L 292.15 293.74 A 0.47 0.46 -48.5 0 0 292.18 294.39 L 294.72 296.68 A 0.51 0.51 0.0 0 0 295.44 296.64 L 307.39 283.35 A 0.40 0.39 -47.6 0 0 307.37 282.79 Q 306.21 281.70 297.07 273.37"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 78.51 290.11 Q 87.48 281.59 88.63 280.47 A 0.40 0.39 46.4 0 0 88.64 279.91 L 76.40 266.85 A 0.51 0.51 0.0 0 0 75.68 266.83 L 73.18 269.17 A 0.47 0.46 47.3 0 0 73.16 269.82 L 81.81 279.05 A 0.53 0.52 -43.5 0 1 81.79 279.80 L 76.89 284.40 A 0.55 0.55 0.0 0 1 76.13 284.38 L 68.38 276.26 A 0.70 0.70 0.0 0 0 67.52 276.13 Q 67.16 276.33 66.25 277.19 Q 65.34 278.06 65.13 278.40 A 0.70 0.70 0.0 0 0 65.21 279.26 L 72.91 287.43 A 0.55 0.55 0.0 0 1 72.89 288.19 L 68.04 292.84 A 0.53 0.52 -43.5 0 1 67.29 292.83 L 58.53 283.71 A 0.47 0.46 45.7 0 0 57.88 283.70 L 55.41 286.07 A 0.51 0.51 0.0 0 0 55.40 286.79 L 67.80 299.69 A 0.40 0.39 46.6 0 0 68.36 299.71 Q 69.53 298.62 78.51 290.11"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 91.24 301.68 Q 90.98 310.73 91.04 317.16 A 1.30 1.29 -72.5 0 0 91.58 318.19 L 94.20 320.06 A 0.68 0.67 -54.2 0 0 95.15 319.90 L 111.27 297.37 A 0.41 0.41 0.0 0 0 111.18 296.79 L 107.68 294.27 A 0.47 0.47 0.0 0 0 107.03 294.38 L 96.13 309.60 A 0.23 0.23 0.0 0 1 95.71 309.48 Q 95.63 308.11 95.80 302.00 Q 96.07 292.95 96.01 286.53 A 1.30 1.29 -72.5 0 0 95.48 285.50 L 92.85 283.62 A 0.68 0.67 -54.2 0 0 91.90 283.78 L 75.78 306.32 A 0.41 0.41 0.0 0 0 75.87 306.90 L 79.38 309.41 A 0.47 0.47 0.0 0 0 80.03 309.30 L 90.92 294.08 A 0.23 0.23 0.0 0 1 91.35 294.20 Q 91.43 295.57 91.24 301.68"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 262.8464 287.2884 A 0.52 0.52 0.0 0 0 262.1195 287.1771 L 258.7668 289.6399 A 0.52 0.52 0.0 0 0 258.6556 290.3668 L 275.1136 312.7716 A 0.52 0.52 0.0 0 0 275.8405 312.8829 L 279.1932 310.4201 A 0.52 0.52 0.0 0 0 279.3044 309.6932 L 262.8464 287.2884"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 251.45 309.91 Q 243.49 305.63 237.73 302.82 A 1.30 1.29 44.1 0 0 236.57 302.83 L 233.72 304.34 A 0.68 0.67 62.4 0 0 233.43 305.26 L 246.35 329.73 A 0.41 0.41 0.0 0 0 246.91 329.91 L 250.72 327.90 A 0.46 0.46 0.0 0 0 250.92 327.28 L 242.20 310.74 A 0.23 0.23 0.0 0 1 242.49 310.41 Q 243.75 310.95 249.13 313.85 Q 257.09 318.13 262.86 320.95 A 1.30 1.29 44.1 0 0 264.02 320.94 L 266.86 319.43 A 0.68 0.67 62.4 0 0 267.15 318.51 L 254.23 294.03 A 0.41 0.41 0.0 0 0 253.67 293.86 L 249.86 295.86 A 0.46 0.46 0.0 0 0 249.67 296.49 L 258.39 313.03 A 0.23 0.23 0.0 0 1 258.09 313.35 Q 256.83 312.81 251.45 309.91"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 120.58 302.81 A 3.08 3.08 0.0 0 0 117.50 299.73 A 3.08 3.08 0.0 0 0 114.42 302.81 A 3.08 3.08 0.0 0 0 117.50 305.89 A 3.08 3.08 0.0 0 0 120.58 302.81"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 136.22 307.78 Q 134.37 307.13 134.36 307.12 A 0.65 0.64 17.1 0 0 133.58 307.53 L 125.87 329.45 A 0.55 0.54 18.8 0 1 125.18 329.78 L 117.75 327.16 A 0.50 0.49 18.9 0 0 117.13 327.46 L 116.01 330.65 A 0.55 0.54 -71.4 0 0 116.35 331.35 Q 121.31 332.99 126.69 334.95 Q 132.12 336.78 137.02 338.60 A 0.55 0.54 -70.0 0 0 137.73 338.27 L 138.84 335.08 A 0.50 0.49 19.8 0 0 138.54 334.45 L 131.11 331.86 A 0.55 0.54 19.9 0 1 130.78 331.17 L 138.44 309.24 A 0.65 0.64 21.5 0 0 138.09 308.43 Q 138.08 308.43 136.22 307.78"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 207.59 328.06 Q 203.47 331.27 205.17 335.48 Q 207.50 341.27 214.24 340.11 Q 220.45 339.04 225.86 337.60 A 0.60 0.59 76.2 0 0 226.29 336.89 L 220.28 309.80 A 0.35 0.35 0.0 0 0 219.87 309.53 Q 212.21 310.97 206.44 312.62 C 198.62 314.86 198.64 326.22 207.41 327.39 A 0.38 0.38 0.0 0 1 207.59 328.06"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 165.68 314.48 L 149.32 311.81 A 0.72 0.72 0.0 0 0 148.50 312.40 L 148.02 315.31 A 0.69 0.68 9.5 0 0 148.59 316.10 L 160.05 318.00 A 0.44 0.44 0.0 0 1 160.40 318.50 L 156.56 341.80 A 0.42 0.42 0.0 0 0 156.91 342.29 L 161.21 342.92 A 0.47 0.46 -80.9 0 0 161.74 342.54 L 166.21 315.20 A 0.63 0.63 0.0 0 0 165.68 314.48"/>
            <path stroke="#808080" vectorEffect="non-scaling-stroke" d="M 182.7869 314.3711 A 14.99 13.44 -90.7 0 0 169.5310 329.5242 A 14.99 13.44 -90.7 0 0 183.1531 344.3489 A 14.99 13.44 -90.7 0 0 196.4090 329.1958 A 14.99 13.44 -90.7 0 0 182.7869 314.3711"/>
          </g>
          <path fill="#000000" d="M 185.47 0.00 Q 186.22 0.33 186.77 0.00 Q 186.85 0.01 186.93 0.00 Q 254.56 3.48 302.60 48.15 Q 347.77 90.14 357.94 152.33 Q 358.56 156.13 359.08 161.91 Q 359.51 166.72 360.00 171.51 L 360.00 171.88 Q 359.68 173.21 360.00 174.49 L 360.00 185.40 Q 358.14 236.68 331.13 277.88 Q 307.38 314.11 271.23 335.24 Q 239.27 353.92 202.45 358.47 Q 195.38 359.34 188.25 360.00 Q 188.18 359.99 188.12 360.00 Q 186.79 359.68 185.52 360.00 L 174.53 360.00 Q 173.82 359.70 173.28 360.00 L 172.86 360.00 Q 161.01 359.10 157.75 358.68 Q 107.13 352.11 67.79 320.70 C 29.54 290.16 5.96 246.46 0.84 197.92 C 0.56 195.26 0.47 191.33 0.00 188.06 Q 0.00 187.97 0.00 187.88 Q 0.33 186.65 0.00 185.51 L 0.00 174.57 Q 0.32 173.74 0.00 172.99 L 0.00 172.62 Q 0.23 172.50 0.15 172.25 Q 2.47 122.74 28.97 81.98 C 61.07 32.62 114.97 2.17 174.43 0.00 L 185.47 0.00 Z"/>
          <path fill="#ffffff" d="M 159.54 46.53 Q 157.54 46.82 157.53 46.82 A 0.68 0.68 0.0 0 1 156.87 46.25 L 155.45 36.79 A 2.13 2.05 22.5 0 0 155.01 35.78 L 142.51 20.10 A 0.10 0.10 0.0 0 1 142.57 19.93 L 147.97 19.12 A 0.44 0.43 65.9 0 1 148.38 19.28 Q 152.60 24.79 156.31 29.70 Q 156.89 30.47 157.16 30.43 Q 157.44 30.39 157.77 29.49 Q 159.91 23.71 162.36 17.22 A 0.44 0.43 -82.7 0 1 162.70 16.95 L 168.11 16.16 A 0.10 0.10 0.0 0 1 168.21 16.31 L 160.77 34.93 A 2.13 2.05 -39.3 0 0 160.64 36.02 L 162.01 45.49 A 0.68 0.68 0.0 0 1 161.55 46.23 Q 161.54 46.23 159.54 46.53 Z"/>
          <path fill="#ffffff" d="M 202.43 31.09 A 0.38 0.38 0.0 0 0 202.38 31.78 C 210.28 35.75 206.58 46.48 198.47 46.03 Q 192.49 45.71 184.78 44.57 A 0.35 0.34 -82.3 0 1 184.49 44.18 L 187.66 16.64 A 0.59 0.59 0.0 0 1 188.29 16.12 Q 193.87 16.52 200.08 17.54 Q 206.83 18.65 207.14 24.87 Q 207.37 29.40 202.43 31.09 Z"/>
          <path fill="#ffffff" d="M 230.3346 23.4633 A 14.98 13.43 -72.5 0 1 238.6384 41.7885 A 14.98 13.43 -72.5 0 1 221.3254 52.0367 A 14.98 13.43 -72.5 0 1 213.0216 33.7115 A 14.98 13.43 -72.5 0 1 230.3346 23.4633 Z"/>
          <path fill="#ffffff" d="M 135.05 36.98 C 143.89 37.11 145.24 48.38 137.74 51.52 Q 132.21 53.84 124.77 56.17 A 0.35 0.34 71.8 0 1 124.34 55.95 L 115.19 29.76 A 0.60 0.59 69.5 0 1 115.53 29.01 Q 120.73 26.94 126.77 25.15 Q 133.33 23.21 136.32 28.68 Q 138.50 32.66 134.79 36.33 A 0.38 0.38 0.0 0 0 135.05 36.98 Z"/>
          <path fill="#ffffff" d="M 250.61 31.88 L 254.30 33.89 A 0.51 0.51 0.0 0 1 254.51 34.58 L 243.34 55.19 A 0.51 0.51 0.0 0 0 243.55 55.88 L 253.83 61.45 A 0.51 0.51 0.0 0 1 254.04 62.14 L 252.44 65.09 A 0.51 0.51 0.0 0 1 251.75 65.30 L 236.88 57.25 A 0.51 0.51 0.0 0 1 236.67 56.56 L 249.92 32.09 A 0.51 0.51 0.0 0 1 250.61 31.88 Z"/>
          <path fill="#ffffff" d="M 77.09 52.73 A 0.66 0.66 0.0 0 1 77.26 51.81 L 85.55 46.11 A 13.38 13.04 55.5 0 1 103.87 49.75 L 105.05 51.47 A 13.38 13.04 55.5 0 1 101.88 69.88 L 93.59 75.58 A 0.66 0.66 0.0 0 1 92.67 75.41 L 77.09 52.73 Z"/>
          <path fill="#ffffff" d="M 280.60 50.68 Q 285.06 54.29 289.21 57.47 A 0.55 0.54 -52.4 0 1 289.31 58.24 L 287.21 60.89 A 0.50 0.49 37.9 0 1 286.52 60.97 L 280.35 56.07 A 0.55 0.54 37.8 0 0 279.59 56.16 L 265.14 74.38 A 0.65 0.64 36.2 0 1 264.27 74.51 Q 264.26 74.50 262.72 73.28 Q 261.18 72.06 261.17 72.06 A 0.65 0.64 40.6 0 1 261.09 71.18 L 275.50 52.93 A 0.55 0.54 38.9 0 0 275.42 52.17 L 269.23 47.29 A 0.50 0.49 38.8 0 1 269.15 46.60 L 271.25 43.95 A 0.55 0.54 -50.9 0 1 272.02 43.86 Q 276.07 47.18 280.60 50.68 Z"/>
          <path fill="#ffffff" d="M 178.82 145.25 A 0.25 0.25 0.0 0 0 179.25 145.47 C 186.68 137.35 195.65 132.44 206.93 132.39 C 238.83 132.23 250.13 158.60 246.70 186.27 C 242.73 218.35 220.79 247.65 185.26 244.30 C 176.27 243.45 165.92 239.02 160.45 231.45 A 0.39 0.39 0.0 0 0 159.75 231.60 L 157.60 241.37 A 1.14 1.14 0.0 0 1 157.03 242.13 L 112.79 265.60 A 0.22 0.22 0.0 0 1 112.47 265.35 L 149.90 94.98 A 0.77 0.77 0.0 0 1 150.65 94.37 L 189.53 94.37 A 0.38 0.38 0.0 0 1 189.90 94.83 L 178.82 145.25 Z"/>
        </svg>
      </a>

      <div className="w-full max-w-lg bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl overflow-hidden text-white transition-all duration-300 hover:shadow-3xl border border-white/20">
        <div className="p-8 bg-gradient-to-r from-purple-600/80 to-indigo-600/80 backdrop-blur-sm flex items-center justify-center relative">
          <button
            onClick={() => setShowHowToPlay(true)}
            className="absolute top-4 right-4 p-2 rounded-full hover:bg-white/20 transition-colors"
            title="How to Play"
          >
            <HelpCircle size={24} className="text-white" />
          </button>
          
          <div className="flex flex-col items-center">
            <PencilRuler size={56} className="text-white mb-3 drop-shadow-lg" />
            <h1 className="text-4xl font-bold text-center text-white drop-shadow-lg">
              Scribble Draw & Guess
            </h1>
            <p className="text-purple-100 text-center mt-2 text-lg">Draw, guess, and have fun!</p>
            <div className="mt-3 text-sm bg-white/20 rounded-full px-3 py-1">
              Created by <span className="font-bold">Mohammad Abir Hayat</span> 🎨
            </div>
          </div>
        </div>

        <div className="p-8">
          <div className="mb-8">
            <label htmlFor="name" className="block text-sm font-semibold mb-3 text-white">
              Your Name
            </label>
            <input
              type="text"
              id="name"
              value={name}
              onChange={handleNameChange}
              className={`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-400 bg-white/10 backdrop-blur-sm text-white placeholder-white/60 transition-all duration-200 ${
                nameError ? 'border-red-400 ring-2 ring-red-400' : 'border-white/30 hover:border-white/50'
              }`}
              placeholder="Enter your name"
              maxLength={12}
            />
            {nameError && <p className="text-red-300 text-sm mt-2 bg-red-500/20 px-3 py-1 rounded-lg">{nameError}</p>}
          </div>

          <div className="mb-8">
            <label className="block text-sm font-semibold mb-4 text-white">
              Customize Your Avatar
            </label>
            <AvatarCreator avatar={avatar} setAvatar={setAvatar} />
          </div>

          <div className="mb-8">
            <label htmlFor="roomCode" className="block text-sm font-semibold mb-3 text-white">
              Room Code (to join existing room)
            </label>
            <input
              type="text"
              id="roomCode"
              value={roomCode}
              onChange={handleRoomCodeChange}
              className={`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-400 bg-white/10 backdrop-blur-sm text-white placeholder-white/60 transition-all duration-200 ${
                roomError ? 'border-red-400 ring-2 ring-red-400' : 'border-white/30 hover:border-white/50'
              }`}
              placeholder="Enter room code to join"
            />
            {roomError && <p className="text-red-300 text-sm mt-2 bg-red-500/20 px-3 py-1 rounded-lg">{roomError}</p>}
          </div>

          <div className="flex flex-col sm:flex-row gap-4 mt-8">
            <button
              onClick={handleCreateRoom}
              className="bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white font-bold py-4 px-6 rounded-xl transition-all duration-200 flex-1 shadow-lg hover:shadow-xl transform hover:scale-105"
            >
              Create Room
            </button>
            <button
              onClick={handleJoinRoom}
              className="bg-gradient-to-r from-indigo-600 to-indigo-700 hover:from-indigo-700 hover:to-indigo-800 text-white font-bold py-4 px-6 rounded-xl transition-all duration-200 flex-1 shadow-lg hover:shadow-xl transform hover:scale-105"
            >
              Join Room
            </button>
          </div>
        </div>
      </div>

      <HowToPlayModal 
        isOpen={showHowToPlay} 
        onClose={handleCloseHowToPlay} 
      />
    </div>
  );
};

export default HomePage;